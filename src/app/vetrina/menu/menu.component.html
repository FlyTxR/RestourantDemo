<header>
    <nav>
        <div class="logo" (click)="navigateToHome()">Roma Antica</div>
        <ul class="nav-links">
            <li><a (click)="scrollToSection('home')">Home</a></li>
            <li><a (click)="navigateToHome()">La Nostra Storia</a></li>
            <li><a class="active">Menu</a></li>
            <li><a (click)="navigateToHome()">Contatti</a></li>
        </ul>
    </nav>
</header>

<section class="menu-hero">
    <div class="menu-hero-overlay"></div>
    <img src="https://images.unsplash.com/photo-1515669097368-22e68427d265?w=1920&q=80" alt="Menu Roma Antica">
    <div class="menu-hero-content">
        <h1>Il Nostro Menu</h1>
        <p>Un viaggio nei sapori della tradizione romana</p>
    </div>
</section>

<!-- Loading State -->
@if (loading()) {
<div class="loading-container">
    <div class="spinner"></div>
    <p>Caricamento del menu...</p>
</div>
}

<!-- Error State -->
@if (error()) {
<div class="error-container">
    <p class="error-message">{{ error() }}</p>
    <button (click)="loadMenuData()" class="btn btn-primary">Riprova</button>
</div>
}

<!-- Menu Content -->
@if (!loading() && !error()) {
<div class="menu-nav-wrapper">
    <nav class="menu-nav">
        @for (cat of categories(); track cat.id) {
        <button [class.active]="selectedCategory() === cat.id" (click)="selectCategory(cat.id)">
            {{cat.name}}
        </button>
        }
    </nav>
</div>

<section class="menu-content">
    <div class="container">
        @for (cat of categories(); track cat.id) {
        <div [id]="getCategorySlug(cat.id)" class="menu-category">
            <h2 class="category-title">{{cat.name}}</h2>
            @if (cat.description) {
            <p class="category-description">{{cat.description}}</p>
            }

            <div class="menu-grid">
                @for (item of getItemsByCategory(cat.id); track item.id) {
                <div class="menu-item">

                    <!-- Immagine con helper -->
                    @if (hasImage(item)) {
                    <img [src]="item.imageUrl" class="menu-item-image" (error)="onImageError($event)">
                    } @else {
                    <div class="placeholder-image">
                        <span class="placeholder-icon">üçù</span>
                    </div>
                    }

                    <div class="item-header">
                        <div class="item-title-wrapper">
                            <h3 class="item-name">{{item.name}}</h3>
                            @if (item.isRecommended) {
                            <span class="recommended-badge">Chef's Choice</span>
                            }
                            @if (item.isVegetarian) {
                            <span class="vegetarian-badge">üå±</span>
                            }
                        </div>
                        <span class="item-price">‚Ç¨{{formatPrice(item.price)}}</span>
                    </div>

                    <p class="item-description">{{item.description}}</p>

                    @if (item.allergens) {
                    <p class="item-allergens">
                        <span class="allergen-icon">‚ö†Ô∏è</span> {{item.allergens}}
                    </p>
                    }
                </div>
                }
            </div>

        </div>
        }

        <div class="menu-footer-cta">
            <h2>Pronto per un'esperienza indimenticabile?</h2>
            <p>Prenota il tuo tavolo e lasciati conquistare dai sapori di Roma</p>
            <button (click)="navigateToBooking()" class="btn btn-primary">Prenota Ora</button>
        </div>
    </div>
</section>
}

<footer>
    <div class="footer-content">
        <div class="footer-section">
            <h3>Roma Antica</h3>
            <p>L'eccellenza della cucina romana</p>
        </div>
        <div class="footer-section">
            <h3>Contatti</h3>
            <p>Via Esempio 123, Milano<br>
                Tel: +39 02 1234567<br>
                info&#64;romaantica.it</p>
        </div>
        <div class="footer-section">
            <h3>Orari</h3>
            <p>Marted√¨ - Sabato<br>
                19:30 - 23:00<br>
                Domenica chiuso</p>
        </div>
    </div>
    <p>&copy; 2025 Roma Antica. Tutti i diritti riservati.</p>
</footer>